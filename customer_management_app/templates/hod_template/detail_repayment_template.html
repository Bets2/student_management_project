{% extends 'hod_template/base_template.html' %}

{% block page_title %}
    Repayment Detail | Customer: {{repayments.customer_id.customer_name}}
{% endblock page_title %}

{% block main_content %}

{% load static %}


    <section class="content">
 
        <div class="container-fluid">

            
                <div class="card">
                    <div class="card-header">
                        <h3 class="text-primary"><i class="fas fa-money-bill-wave"></i>  Repayment Date: {{ repayments.repayment_date }}  </h3>
                        <div class="card-tools">
                            <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                            <i class="fas fa-minus"></i>
                            </button>
                            <button type="button" class="btn btn-tool" data-card-widget="remove" title="Remove">
                            <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="post clearfix"> 
                            
                            <div class="row">
                                <div class="col-3 col-sm-4">
                                    <h4>Customer Details</h4>
                                    <div class="info-box bg-light">
                                        <div class="info-box-content">
                                            
                                            <span class="info-box-text text-left text-muted">Customer Name: <b> {{ repayments.customer_id.customer_name }}</b></span>
                                            
                                            <span class="info-box-text text-left text-muted"> Email: <b> {{ repayments.customer_id.email }}</b> </span>
                                            
                                            <span class="info-box-text text-left text-muted"> Customer Phone: <b> {{ repayments.customer_id.phone }}</b> </span>
                                            <span class="info-box-text text-left text-muted"> Customer Type: <b> {{ repayments.customer_id.customer_type }}</b> </span>
            
                                        </div>
                                    </div>
                                </div> 
                                <div class="col-3 col-sm-4">
                                    <h4>Loan Details</h4>
                                    <div class="info-box bg-light">
                                        <div class="info-box-content">
                                            
                                            <span class="info-box-text text-left text-muted">Total Loan Amount: <b> R {{ repayments.disbursement_id.disbursement_amount|floatformat:2}}</b></span>
                                            
                                            <span class="info-box-text text-left text-muted"> Loan Reason: <b> {{ repayments.disbursement_id.disbursement_reason}}</b> </span>                                            
                                            <span class="info-box-text text-left text-muted"> Loan Monthly Repayment Amount: <b> R {{ grant.disbursement_id.disbursement_monthly_repayment_amount|floatformat:2}}</b> </span>
                                            <span class="info-box-text text-left text-muted"> Contract Volume Target: <b>  {{ repayments.disbursement_id.total_target|floatformat:2}}</b> </span>
                                        </div>
                                    </div>
                                </div> 
                            </div>   

                        </div>
                    </br>
                 
                            <div class="col-12 col-md-4 col-lg-12 order-2 order-md-1">
                                <div class="row">
                                    <div class="col-3 col-sm-2">
                                        <div class="info-box bg-light">
                                            <div class="info-box-content">
                                                <span class="info-box-text text-center text-muted">Disbursed Amount</span>
                                                <span class="info-box-number text-center text-muted mb-0"> R{{ repayments.disbursement_id.disbursement_amount|floatformat:2}} </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 col-sm-2">
                                        <div class="info-box bg-light">
                                            <div class="info-box-content">
                                                <span class="info-box-text text-center text-muted">Total Base Volume Target</span>
                                                <span class="info-box-number text-center text-muted mb-0">{{ repayments.disbursement_id.total_target|floatformat:2}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 col-sm-2">
                                        <div class="info-box bg-light">
                                            <div class="info-box-content">
                                                <span class="info-box-text text-center text-muted">Monthly <b>Base</b> Volume Target</span>
                                                <span class="info-box-number text-center text-muted mb-0">{{ repayments.disbursement_id.monthly_target|floatformat:2}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 col-sm-2">
                                        <div class="info-box bg-light">
                                            <div class="info-box-content">
                                                <span class="info-box-text text-center text-muted">Monthly <b>Contract</b> Vol. Target</span>
                                                <span class="info-box-number text-center text-muted mb-0">{{ repayments.disbursement_id.contract_monthly_target|floatformat:2}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 col-sm-2">
                                        <div class="info-box bg-yellow">
                                            <div class="info-box-content">
                                                <span class="info-box-text text-center text-muted"><b>Actual</b> Volume</span>
                                                <span class="info-box-number text-center text-muted mb-0">{{ repayments.actual_volume_tone|floatformat:2 }}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-3 col-sm-2">
                                        <div class="info-box bg-yellow">
                                            <div class="info-box-content">
                                                <span class="info-box-text text-center text-muted">Repayment Amount</span>
                                                <span class="info-box-number text-center text-muted mb-0">R{{ repayments.repayment_amount|floatformat:2 }}</span>
                                            </div>
                                        </div>
                                    </div>                                    
                                </div>
                            </br>
                            
                                
                                <div class="post clearfix"> 
                                    <h4>Volume Details</h4>


                                </div>
                                <div class="post clearfix">                 
                                    <div class="col-12 col-md-4 col-lg-12 order-2 order-md-1">
                                        <div class="row">
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">HD KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">{{ repayments.hd_kg|floatformat:2}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">LD KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">{{ repayments.ld_kg|floatformat:2}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">LLD KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">{{ repayments.lld_kg|floatformat:2 }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">PP KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">{{ repayments.pp_kg|floatformat:2 }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">PVC KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">R{{ repayments.pvc_kg|floatformat:2 }}</span>
                                                    </div>
                                                </div>
                                            </div>   
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">PS KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">R{{ repayments.ps_kg|floatformat:2 }}</span>
                                                    </div>
                                                </div>
                                            </div>  
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">PET KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">{{ repayments.pet_kg|floatformat:2 }}</span>
                                                    </div>
                                                </div>
                                            </div>    
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted">Other KG</span>
                                                        <span class="info-box-number text-center text-muted mb-0">{{ repayments.other_kg|floatformat:2 }}</span>
                                                    </div>
                                                </div>
                                            </div>       
                                            <div class="col-3 col-sm-6">
                                                <div class="info-box bg-yellow">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-muted"><b>Total Volume KG</b></span>
                                                        <span class="info-box-number text-center text-muted mb-0"><b>{{ repayments.actual_volume_tone|floatformat:2 }}</b></span>
                                                    </div>
                                                </div>
                                            </div>            
                                            <div class="col-3 col-sm-2">
                                                <div class="info-box bg-light">
                                                    <div class="info-box-content">
                                                        <span class="info-box-text text-center text-blue"><b>% </b> to Contract Target</span>
                                                        <span class="info-box-number text-center text-blue mb-0"><b>{{ percentage_actual_volume_to_target|floatformat:2 }} %</b></span>
                                                    </div>
                                                </div>
                                            </div>              
                                        </div>
                                    </div>  
                                </div>


                                <div class="row">
                                    <div class="col-12">
                            
                                        <div class="post clearfix">                 
                                            <p class="text-sm">Any Payment Comments:
                                                <b class="d-block"> {{ repayments.comment}}</b>
                                            </p>
                                        </div>
                                        <div class="post clearfix">                 
                                            <p class="text-sm">Payment Date:
                                                <b class="d-block"> {{ repayments.repayment_date}}</b>
                                            </p>
                                        </div>


                                        <div class="post clearfix">            
                                            <a href = "{% url 'manage_repayment' %}" class = "btn btn-secondary my-5"> Back </a>
                                            <a href="/edit_repayment/{{ repayments.id}}" class="btn btn-success">Edit</a> 
                                            <a href="/delete_repayment/{{ repayments.id }}" class="btn btn-danger">Delete</a> 
                                        </div>
                                    
                                    </div>
                                </div>
                            </div>
                           
                    </div>
                </div>
                               
         
        </div><!-- /.container-fluid -->
    </section>

  {% endblock main_content %}